# Тест-кейсы API сервиса объявлений

## Содержание
1. [POST /api/1/item](#post-api1item)
2. [GET](#get-api1item)
4. [DELETE /api/2/item](#delete-api2item)

---

## POST /api/1/item  

### TC-POST-001: Успешное создание объявления  
- **Запрос:** POST /api/1/item   
- **Тело (application/json) с валидными данными:**  
```json
{
  "sellerId": 345624,
  "name": "Blue Pen",
  "price": 1500,
  "statistics": {
    "likes": 20,
    "viewCount": 300,
    "contacts": 5
  }
}
```
- **Ожидаемый результат:**  
1. Status Code: 200 OK
2. Тело ответа содержит поле status с ID созданного объявления
3. Все поля объявления соответствуют отправленным данным

### TC-POST-002: Ошибка валидации (отрицательная цена)  
- **Запрос:** POST /api/1/item   
- **Тело (application/json) с отрицательным полем price:**  
```json
{
  "sellerId": 567289,
  "name": "Next Pen",
  "price": -1500,
  "statistics": {
    "likes": 20,
    "viewCount": 300,
    "contacts": 5
  }
}
```
- **Ожидаемый результат:**  
1. Status Code: 400 Bad Request
2. Сообщение об ошибке валидации цены

### TC-POST-003: Ошибка валидации (недопустимый sellerID)  
- **Запрос:** POST /api/1/item   
- **Тело (application/json) с sellerID, не входящим в [111111, 999999]:**  
```json
{
  "sellerId": 0,
  "name": "Next Pen",
  "price": 100,
  "statistics": {
    "likes": 20,
    "viewCount": 300,
    "contacts": 5
  }
}
```
- **Ожидаемый результат:**  
1. Status Code: 400 Bad Request
2. Сообщение об ошибке валидации sellerID

---
# GET
## GET /api/1/item
### TC-GET-001: Успешное получение объявления по id
- **Запрос:** GET /api/1/item/{{id}}  
- **Предусловие:** Объявление с {{id}} существует
- **Входные данные:** id (валидный, существующий)
- **Ожидаемый результат:**
  1. Status Code: 200 OK  
  2. Формат ответа:
  ```json
  [{
    "id": "{{id}}",
    "sellerId": 783925,
    "name": "GET New Pen",
    "price": 1000,
    "statistics": {
      "likes": 100,
      "viewCount": 700,
      "contacts": 20
    }
  }]
  ```
### TC-GET-002: Невалидный id объявления
- **Запрос:** GET /api/1/item/ddh389  
- **Входные данные:** id
- **Предусловие:** невалидный формат id  
- **Ожидаемый результат:**
  1. Status Code: 400 Bad Request

### TC-GET-003: Объявление не найдено по id
- **Запрос:** GET /api/1/item/dad229af-986a-47bb-9b06-b594e99697a4  
- **Входные данные:** id  
- **Предусловие:** формат id корректный, но объявлений с данным id нет  
- **Ожидаемый результат:**
  1. Status Code: 404 Not Found
---

## GET /api/1/statistic
### TC-GET-004: Успешное получение объявления по id
- **Запрос:** GET /api/1/statistic/{{id}}
- **Входные данные:** id
- **Предусловие:**
  1. Объявление с {{id}} существует
  2. Объявление имеет статистику с полями:
   ```json
   {
     "likes": 5421,
     "viewCount": 56723,
     "contacts": 90
   }
   ```
- **Ожидаемый результат:**
  1. Код ответа: 200 OK
  2. Формат ответа:
  ```json
  [
    {
      "likes": 5421,
      "viewCount": 56723,
      "contacts": 90
    }
  ]
  ```
  ---
  
## GET /api/1/items
### TC-GET-005: Корректное получение всех объявлений по sellerID, если объявления есть
- **Запрос:** /api/1/:sellerID/item?sellerID={{full_sellerID}}
- **Входные данные:** sellerID
- **Предусловие:** наличие хотя бы 1 объявления по sellerID, валидное значение sellerID
- **Ожидаемый результат:**
  1. Status Code: 200 OK
  2. Массив объявлений с указанным sellerId
 
### TC-GET-006: Корректная обработка, если объявлений по sellerID нет
- **Запрос:** /api/1/:sellerID/item?sellerID={{empty_sellerID}}
- **Входные данные:** sellerID
- **Предусловие:** валидное значение sellerID без объявлений
- **Ожидаемый результат:**
  1. Status Code: 200 OK
  2. Пустой массив []
 ---
 
## GET /api/2/statistic
### TC-GET-007: Успешное получение объявления по id
- **Запрос:** GET /api/2/statistic/{{id}}
- **Входные данные:** id
- **Предусловие:**
  1. Объявление с {{id}} существует
  2. Объявление имеет статистику с полями:
   ```json
   {
     "likes": 5421,
     "viewCount": 56723,
     "contacts": 90
   }
   ```
- **Ожидаемый результат:**
  1. Код ответа: 200 OK
  2. Формат ответа:
  ```json
  [
    {
      "likes": 5421,
      "viewCount": 56723,
      "contacts": 90
    }
  ]
  ```
---

## DELETE /api/2/item
### TC-DELETE-001: Успешное удаление объявления по id
- **Запрос:** DELETE /api/2/item/{{valid_id}}
- **Входные данные:** id
- **Предусловие:** valid_id валидный id, содержащий объявление
- **Ожидаемый результат:**
  1. Status Code: 200 OK
  2. Пустое тело ответа
  3. Последующие запросы к объявлению возвращают 404

### TC-DELETE-002: Невалидный id объявления
- **Запрос:** DELETE /api/2/item/{{invalid_id}}
- **Входные данные:** id
- **Предусловие:** valid_id невалидный id
- **Ожидаемый результат:**
  1. Status Code: 400 Bad Request
 
### TC-DELETE-003: Объявление не найдено  
- **Запрос:** DELETE /api/2/item/dad229af-986a-47bb-9b06-b594e99697a4  
- **Входные данные:** id  
- **Предусловие:** valid_id валидный формат id, не содержащий объявления  
- **Ожидаемый результат:**  
  1. Status Code: 404 Not Found

### TC-DELETE-004: Проверка обработки неразрешенного HTTP-метода
- **Запрос:** GET /api/2/item/{{valid_id}}
- **Входные данные:** id
- **Предусловие:**
  1. Существует валидный ID объявления (`valid_id`)
  2. Объявление создано и доступно в системе
  3. Для удаления объявления должен использоваться метод `DELETE`
- **Ожидаемый результат:**
  1. Status Code: 405 Method Not Allowed
